import{createContext,createElement,memo,useCallback,useContext,useEffect,useMemo,useState}from"react";const timeUnits=new Map([["year",31536e6],["month",2592e6],["day",864e5],["hour",36e5],["minute",6e4],["second",1e3]]);function timeSince(e,t,o){var n=Date.now()-+e;if(o||!(n<0))for(var[a,r]of timeUnits.entries()){r=Math[t](Math.abs(n)/r);if(1<=r)return[r*Math.sign(n),a]}return[0,"second"]}const Context=createContext(void 0),TimeAgoProvider=({children:e,...t})=>createElement(Context.Provider,{value:t},e),TimeAgo=memo(e=>{const{date:t,locale:o=navigator.language,formatOptions:n,allowFuture:a=!1,hideSeconds:r=!0,hideSecondsText:[i,m]=[],roundStrategy:s="round",timeElement:c=!0}={...useContext(Context),...e},u=useMemo(()=>t instanceof Date?t:new Date(t),[t]),l=useMemo(()=>new Intl.RelativeTimeFormat(o,{localeMatcher:"best fit",numeric:"auto",style:"long",...n}),[o,n]),f=useCallback((e,t)=>r&&"second"===t?e<0?m??l.format(1,"minute"):i??l.format(-1,"minute"):l.format(-e,t),[l,r,i,m]),[d,g]=useState(()=>{var[e,t]=timeSince(u,s,a);return f(e,t)}),[v,S]=useState(),x=useCallback(()=>{var[e,t]=timeSince(u,s,a);g(f(e,t)),S(t)},[u,s,a,f]);return useEffect(x,[x]),useEffect(()=>{if(v){var e=timeUnits.get(v);const t=setInterval(x,e);return()=>clearInterval(t)}},[v,x]),c?createElement("time",{title:u.toLocaleString(o),dateTime:u.toISOString()},d):d});TimeAgo.displayName="TimeAgo";export default TimeAgo;export{TimeAgoProvider};